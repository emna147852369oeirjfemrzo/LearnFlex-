{% extends 'front/home.html.twig' %}

{% block title %}Dashboard Ã‰tudiant - LearnFlex{% endblock %}

{% block stylesheets %}
<style>
    .etudiant-dashboard { padding: 60px 0; background: #f8fafc; min-height: 100vh; }
    .welcome-section { margin-bottom: 40px; }
    .welcome-section h1 { font-size: 2.2rem; color: var(--secondary); margin-bottom: 8px; }
    .welcome-section p { color: #64748b; font-size: 1.1rem; }

    .stats-grid { 
        display: grid; 
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
        gap: 25px; 
        margin-bottom: 50px;
    }

    .stat-card {
        background: white;
        padding: 30px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        gap: 20px;
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05);
        transition: transform 0.3s ease;
    }

    .stat-card:hover { transform: translateY(-5px); }

    .stat-icon {
        width: 65px;
        height: 65px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
    }

    .icon-blue { background: #eff6ff; color: #3b82f6; }
    .icon-green { background: #f0fdf4; color: #10b981; }
    .icon-purple { background: #faf5ff; color: #a855f7; }
    .icon-orange { background: #fff7ed; color: #f97316; }
    .icon-red { background: #fef2f2; color: #ef4444; }

    .stat-info h3 { font-size: 2rem; font-weight: 700; color: #1e293b; margin: 0; }
    .stat-info p { color: #64748b; margin: 0; font-size: 0.95rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }

    .recent-section { background: white; padding: 35px; border-radius: 24px; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05); }
    .recent-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
    .recent-header h2 { font-size: 1.5rem; color: var(--secondary); margin: 0; }
    .view-all { color: var(--primary); font-weight: 600; text-decoration: none; display: flex; align-items: center; gap: 8px; }

    .recent-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
    .mini-card {
        border: 1px solid #f1f5f9;
        border-radius: 12px;
        padding: 15px;
        display: flex;
        gap: 15px;
        align-items: center;
        text-decoration: none;
        transition: all 0.2s ease;
    }
    .mini-card:hover { background: #f8fafc; border-color: var(--primary); }
    .mini-img { width: 60px; height: 60px; border-radius: 8px; object-fit: cover; }
    .mini-info h4 { margin: 0 0 5px 0; color: #1e293b; font-size: 1.1rem; }
    .mini-info span { font-size: 0.85rem; color: #94a3b8; }
</style>
{% endblock %}

{% block body %}
<div class="etudiant-dashboard">
    <div class="container">
        <div class="welcome-section">
            <h1>Bonjour, Ã‰tudiant ! ðŸ‘‹</h1>
            <p>Ravi de vous revoir. PrÃªt Ã  continuer votre apprentissage ?</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon icon-blue">
                    <i class="fas fa-book-open"></i>
                </div>
                <div class="stat-info">
                    <h3>{{ total_matieres }}</h3>
                    <p>MatiÃ¨res</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon icon-green">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="stat-info">
                    <h3>{{ total_cours }}</h3>
                    <p>Cours Disponibles</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon icon-purple">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-info">
                    <h3>{{ total_hours }}h</h3>
                    <p>Volume Horaire</p>
                </div>
            </div>
        </div>


        <div class="recent-section">
            <div class="recent-header">
                <h2>MatiÃ¨res RÃ©cemment AjoutÃ©es</h2>
                <a href="{{ path('app_etudiant_matiere_catalog') }}" class="view-all">Tout voir <i class="fas fa-arrow-right"></i></a>
            </div>
            <div class="recent-grid">
                {% for matiere in recent_matieres %}
                    <a href="{{ path('app_etudiant_cours_list', {'id': matiere.id}) }}" class="mini-card">
                        {% if matiere.image %}
                            <img src="{{ asset('uploads/images/' ~ matiere.image) }}" class="mini-img" alt="{{ matiere.nomMatiere }}">
                        {% else %}
                            <div class="mini-img" style="background: #e2e8f0; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-image" style="color: #94a3b8;"></i>
                            </div>
                        {% endif %}
                        <div class="mini-info">
                            <h4>{{ matiere.nomMatiere }}</h4>
                            <span>{{ matiere.cours|length }} cours â€¢ {{ matiere.niveau }}</span>
                        </div>
                    </a>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
